<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a2f8f" />
  <title>Thunjai Express — Rider</title>
  <style>
    /* ===== Readability-first palette (ปรับคอนทราสต์ให้ดีขึ้น) ===== */
    :root{
      --brand:#ffd54d; 
      --brand-blue:#0a2f8f; 
      --brand-soft:#fff6cc;

      /* ข้อความและพื้นหลัง */
      --ink:#0b1726;                 
      --bg:#ffffff;                  
      --muted:#475569;               
      --line:#d5dbe3;                

      /* สถานะ/ชิป/ป้าย */
      --chip-bg:#f3f4f6;
      --chip-line:#d7dde6;
      --chip-on-bg:#dbeafe;          
      --chip-on-line:#bfd7ff;

      --radius:18px; --hdr:56px; --bnv:64px; --maxw:480px;

      --focus:#94a3b8; 
      --focus-ring: 0 0 0 3px rgba(148,163,184,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;
      background:var(--bg);
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }

    .app{min-height:100dvh;display:flex;flex-direction:column;align-items:center;background:linear-gradient(180deg,#0a2f8f 0%,#0a2f8f 180px,var(--bg) 180px)}
    .phone{width:100%;max-width:var(--maxw);min-height:100dvh;background:#fff;display:flex;flex-direction:column;box-shadow:0 10px 30px rgba(10,47,143,.08)}

    header{height:var(--hdr);display:flex;align-items:center;justify-content:space-between;padding:0 14px;background:#fff;position:sticky;top:0;z-index:5;border-bottom:1px solid var(--line)}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{inline-size:34px;block-size:34px;border-radius:10px;background:var(--brand);display:grid;place-items:center}
    .logo svg{width:20px;height:20px;color:#0a2f8f}
    .brand h1{font-size:1.06rem;margin:0;color:#0a2f8f;letter-spacing:.1px}
    .role-chip{font-size:.74rem;background:#fff3b0;padding:.25rem .55rem;border-radius:999px;color:#6b5a00;border:1px solid #f0d55e}
    .hdr-actions{display:flex;gap:8px}
    .iconbtn{background:#fff;border:1px solid var(--line);border-radius:12px;padding:8px;display:grid;place-items:center;cursor:pointer}
    .iconbtn:active{transform:scale(.98)}
    .iconbtn:focus-visible{outline:none;box-shadow:var(--focus-ring)}

    .content{flex:1;overflow:auto;padding:16px;display:none}
    .content.active{display:block}

    .grid{display:grid;gap:12px}
    .card{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:14px}
    .row{display:flex;gap:10px;align-items:center;justify-content:space-between;min-width:0}
    .pill{font-size:.78rem;background:#f8fafc;border:1px solid var(--line);padding:.25rem .6rem;border-radius:999px;color:#0b1726}
    .big{font-size:1.42rem;font-weight:800}
    .muted{color:var(--muted);font-size:.88rem}

    /* Chips */
    .chips{display:flex;gap:8px;overflow:auto hidden;white-space:nowrap;flex:1 1 auto;padding-bottom:4px;scrollbar-width:none}
    .chips::-webkit-scrollbar{display:none}
    .chip{
      display:inline-flex;align-items:center;gap:6px;
      padding:7px 11px;border-radius:999px;background:var(--chip-bg);
      border:1px solid var(--chip-line);font-size:.82rem;font-weight:650;color:#1f2937;cursor:pointer;flex:0 0 auto
    }
    .chip[aria-pressed="true"]{background:var(--chip-on-bg);border-color:var(--chip-on-line);color:#0a2f8f}
    .chip:focus-visible{outline:none;box-shadow:var(--focus-ring)}
    .chips.small .chip{padding:5px 9px;font-size:.74rem}

    /* Job cards */
    .job{display:grid;gap:6px;border:1px solid var(--line);border-radius:12px;padding:10px}
    .job .meta{display:flex;gap:6px;flex-wrap:wrap}
    .job .meta .tag{font-size:.74rem;background:#eef2ff;border:1px solid #d7e0ff;color:#1f2a44;padding:.18rem .5rem;border-radius:999px}
    .job .addr{font-size:.9rem}
    .job .act{display:flex;gap:6px;flex-wrap:wrap}
    .btn{appearance:none;border:none;border-radius:10px;padding:9px 11px;font-weight:750;font-size:.86rem;cursor:pointer}
    .btn.primary{background:var(--brand-blue);color:#fff}
    .btn.warn{background:#fef2f2;color:#7f1d1d;border:1px solid #f9caca}
    .btn.ghost{background:#fff;border:1px solid #cbd5e1;color:#0a2f8f}
    .btn.small{padding:7px 9px;font-weight:650;font-size:.8rem}
    .btn:focus-visible{outline:none;box-shadow:var(--focus-ring)}
    .btn:active{transform:translateY(1px)}

    /* Table */
    table{width:100%;border-collapse:separate;border-spacing:0 6px}
    th{font-size:.78rem;text-align:left;color:#1f2a37;font-weight:700}
    td{background:#fff;border:1px solid var(--line);padding:7px 9px;border-radius:8px;font-size:.82rem}

    /* Bottom nav */
    nav.bnv{
      height:var(--bnv);position:sticky;bottom:0;background:#fff;border-top:1px solid var(--line);
      display:grid;grid-template-columns:repeat(auto-fit,minmax(60px,1fr))
    }
    .tab{display:grid;place-items:center;gap:4px;color:#1f2937;font-size:.72rem;cursor:pointer;padding:6px}
    .tab.active{color:var(--brand-blue);font-weight:800}
    .tab:focus-visible{outline:none;box-shadow:var(--focus-ring)}

    .fab{
      position:fixed;inset:auto calc(50% - 40px) 82px auto;width:80px;height:40px;border-radius:999px;
      background:var(--brand);display:flex;align-items:center;justify-content:center;gap:6px;font-weight:800;
      color:#0b1726;border:1px solid #f2c93b;cursor:pointer;font-size:.86rem
    }
    .fab:active{transform:translateY(1px)}
    .fab:focus-visible{outline:none;box-shadow:var(--focus-ring)}

    /* Event badges */
    .ev{display:inline-block;padding:2px 8px;border-radius:999px;font-size:.72rem;font-weight:800;border:1px solid transparent}
    .ev.DELIVERED{background:#ecfdf5;color:#065f46;border-color:#a7f3d0}
    .ev.PICKED{background:#eff6ff;color:#1e40af;border-color:#c7d2fe}
    .ev.ACCEPTJOB{background:#f0f9ff;color:#075985;border-color:#bae6fd}
    .ev.REJECTJOB{background:#fff7ed;color:#9a3412;border-color:#fed7aa}
    .ev.PICKUPDONE{background:#f5f3ff;color:#5b21b6;border-color:#ddd6fe}
    .ev.DELIVERYFAILED{background:#fef2f2;color:#991b1b;border-color:#fecaca}
    .ev.SCAN{background:#f1f5f9;color:#1f2937;border-color:#e2e8f0}

    /* History */
    #tab-history { padding: 6px 12px 12px; }
    .hist-layout{height:calc(100dvh - var(--hdr) - var(--bnv));display:flex;flex-direction:column;gap:6px;}
    .hist-toolbar{position:sticky;top:0;z-index:3;background:#fff;border:1px solid var(--line);border-radius:12px;padding:6px;}
    .hist-bar,.hist-row{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
    .stat-cards.compact{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
    .stat.compact{background:#f8fafc;border:1px solid var(--line);border-radius:10px;padding:6px;text-align:center}
    .stat.compact .num{font-weight:900;font-size:1rem}
    .stat.compact .lbl{font-size:.72rem;color:#64748b}
    .hist-scroll{flex:1;min-height:0;overflow:auto;display:block}
    .card.hist-list{margin:0;padding:10px}
    .hist-scroll table thead th{position:sticky;top:0;z-index:1;background:#fff}
    #histTable td,#histTable th{padding:7px 9px;font-size:.78rem}
    #histTable td.muted{font-size:.76rem;color:var(--muted)}
    .empty{padding:16px;border:1px dashed var(--line);border-radius:10px;text-align:center;color:#64748b}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(15,23,42,.58);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .sheet{width:100%;max-width:var(--maxw);height:92dvh;background:#fff;border-radius:20px;display:flex;flex-direction:column;overflow:hidden}
    .sheet header{position:relative}
    .sheet header h2{font-size:1rem;color:#0a2f8f}
    .sheet .body{flex:1;padding:16px;overflow:auto}

    /* Dark mode */
    @media (prefers-color-scheme: dark){
      body{background:#0b1120;color:#e7edf6}
      .phone{background:#0f162a}
      header,.card,input,textarea,select,td{background:#0f162a;color:#e7edf6;border-color:#243044}
      nav.bnv{background:#0f162a;border-color:#243044}
      .iconbtn{background:#0f162a;border-color:#243044}
      .fab{border-color:#d4b534}
      .job{border-color:#243044}
      .chip{background:#172033;border-color:#2a3650;color:#d9e1ee}
      .chip[aria-pressed="true"]{background:#1e3a6d;border-color:#2c4f94;color:#f0f6ff}
      .hist-toolbar{background:#0f162a;border-color:#243044}
      .stat.compact{background:#101935;border-color:#243044}
      .hist-scroll table thead th{background:#0f162a}
      .sheet{background:#0f162a}
    }

    a, button, input, select, textarea {outline: none;}
    a:focus-visible, button:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible{
      box-shadow: var(--focus-ring);
      border-color: var(--focus);
    }
  </style>
</head>
<body>
  <!-- ===== BODY + SCRIPT เดิมทั้งหมดของคุณ ===== -->
  <!-- ใส่โค้ดเดิมของคุณต่อจากนี้ (Pickup, Delivery, History, COD, Profile, Script JS ฯลฯ) -->
  <!-- ผมไม่ตัดออก เพราะคุณส่งมาแล้วครบทั้ง body + script -->
  <!-- ใช้ไฟล์ที่คุณส่งมา “เสียบ” หลัง <body> ได้เลย โครงสร้างเหมือนเดิมทุกบรรทัด -->
</body>
</html>
