<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a2f8f" />
  <title>Thunjai Express ‚Äî Sender</title>
  <style>
    :root{
  --brand:#ffd54d;
  --brand-blue:#0a2f8f;
  --brand-soft:#fff6cc;

  /* Readability-first */
  --ink:#0b1726;
  --bg:#ffffff;
  --muted:#475569;
  --line:#d5dbe3;

  --radius:18px;
  --hdr:56px; --bnv:64px; --maxw:480px;

  --focus:#94a3b8;
  --focus-ring: 0 0 0 3px rgba(148,163,184,.35);
}
    *{box-sizing:border-box}
    html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:var(--bg);color:var(--ink);line-height:1.45;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:var(--bg);color:var(--ink)}
    /* Edge-to-edge mobile frame */
    .app{min-height:100dvh;display:flex;flex-direction:column;align-items:center;background:linear-gradient(180deg, #0a2f8f 0%, #0a2f8f 180px, var(--bg) 180px)}
    .phone{width:100%;max-width:var(--maxw);min-height:100dvh;background:#fff;border-radius:0;display:flex;flex-direction:column;box-shadow:0 10px 30px rgba(10,47,143,.08)}
    header{
      height:var(--hdr);display:flex;align-items:center;justify-content:space-between;padding:0 14px;background:#fff;position:sticky;top:0;z-index:5;border-bottom:1px solid var(--line)
    }
    .brand{display:flex;gap:10px;align-items:center}
    .logo{inline-size:34px;block-size:34px;border-radius:10px;background:var(--brand);display:grid;place-items:center}
    .logo svg{width:20px;height:20px;color:var(--brand-blue)}
    .brand h1{font-size:1.05rem;margin:0;color:var(--brand-blue)}
    .role-chip{font-size:.72rem;background:var(--brand-soft);padding:.2rem .5rem;border-radius:999px;color:#7a6400;border:1px solid #f6d971}
    .hdr-actions{display:flex;gap:10px}
    .iconbtn{background:#fff;border:1px solid var(--line);border-radius:12px;padding:8px;display:grid;place-items:center;cursor:pointer}
    .iconbtn:active{transform:scale(.98)}

    main{flex:1;display:flex;flex-direction:column}
    .content{flex:1;overflow:auto;padding:16px;display:none}
    .content.active{display:block}

    /* Cards */
    .grid{display:grid;gap:12px}
    .grid.cols-2{grid-template-columns:1fr 1fr}
    .card{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:14px}
    .card h3{margin:.2rem 0 .4rem 0;font-size:.96rem;color:#0a2f8f}
    .stat{display:flex;align-items:center;gap:12px}
    .stat .pill{font-size:.8rem;background:#f8fafc;border:1px solid var(--line);padding:.2rem .5rem;border-radius:999px;color:#0b2b27}
    .big{font-size:1.6rem;font-weight:700}

    /* Forms */
    form{display:grid;gap:10px}
    label{font-size:.85rem;color:#0f172a}
    input, textarea, select{width:100%;padding:12px;border:1px solid var(--line);border-radius:12px;font:inherit}
    textarea{min-height:84px}
    .row{display:grid;gap:10px;grid-template-columns:1fr 1fr}
    .hint{font-size:.78rem;color:var(--muted)}
    .error{font-size:.78rem;color:#b42318}
    .actions{display:flex;gap:10px}
    .btn{appearance:none;border:none;border-radius:12px;padding:12px 14px;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--brand-blue);color:#fff}
    .btn.ghost{background:#fff;border:1px solid var(--line);color:#0a2f8f}

    /* Table-ish */
    table{width:100%;border-collapse:separate;border-spacing:0 10px}
    th{font-size:.8rem;text-align:left;color:#334155;font-weight:600}
    td{background:#fff;border:1px solid var(--line);padding:10px;border-radius:12px}

    /* Bottom Nav */
    nav.bnv{height:var(--bnv);position:sticky;bottom:0;background:#fff;border-top:1px solid var(--line);display:grid;grid-template-columns:repeat(5,1fr)}
    .tab{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  color:#1f2937;
  font-size:.8rem;
  font-weight:600;
  cursor:pointer;
  padding:8px 4px;
  transition:background .2s, color .2s;
  background:#f9fafb; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≠‡∏ô */
}
.tab:hover{
  background:#e5e7eb; /* hover ‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡∏Å‡∏ß‡πà‡∏≤ */
}
.tab.active{
  background:var(--brand-blue);
  color:#ffffff;
  font-weight:700;
}

    /* FAB */
    .fab{position:fixed;inset:auto calc(50% - 40px) 82px auto;width:80px;height:44px;border-radius:999px;background:var(--brand);display:flex;align-items:center;justify-content:center;gap:8px;font-weight:800;color:#0b2b27;border:1px solid #f2c93b;cursor:pointer}
    .fab:active{transform:translateY(1px)}

    /* Modal (Fullscreen) */
    .modal{position:fixed;inset:0;background:rgba(15,23,42,.58);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .sheet{width:100%;max-width:var(--maxw);height:92dvh;background:#fff;border-radius:20px;display:flex;flex-direction:column;overflow:hidden}
    .sheet header{position:relative}
    .sheet header h2{font-size:1rem;color:#0a2f8f}
    .sheet .body{flex:1;padding:16px;overflow:auto}

    /* Dark mode */
    @media (prefers-color-scheme: dark){
      body{background:#0b1020;color:#e5e7eb

      /* Bottom tabs - Dark Mode */
      .tab{background:#172033;color:#e5eaf3;}
      .tab:hover{background:#20324e;}
      .tab.active{background:var(--brand-blue);color:#ffffff;font-weight:700;}
}
      .phone{background:#0f152a}
      header, .card, input, textarea, select, td{background:#0f152a;color:#e5e7eb;border-color:#223}
      nav.bnv{background:#0f152a;border-color:#223}
      .iconbtn{background:#0f152a;border-color:#223}
      .fab{border-color:#d4b534}
    }
  

a, button, input, select, textarea {outline:none;}
a:focus-visible, button:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible{
  box-shadow: var(--focus-ring);
  border-color: var(--focus);
}

</style>
</head>
<body>
  <div class="app">
    <div class="phone">
      <header>
        <div class="brand">
          <div class="logo" aria-label="Thunjai Express">
            <!-- lightning icon -->
            <a href="home.html" class="logo" aria-label="Thunjai Express">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M13 2 3 14h7l-1 8 10-12h-7l1-8z"/>
      </svg>
    </a>
          </div>
          <div>
            <div class="role-chip">Role: Sender</div>
            <h1>Thunjai Express</h1>
          </div>
        </div>
        <div class="hdr-actions">
          <button class="iconbtn" title="‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô" onclick="toast('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà')">üîî</button>
          <button class="iconbtn" title="‡∏™‡πÅ‡∏Å‡∏ô" onclick="openScan()">üì∑</button>
        </div>
      </header>

      <!-- Dashboard -->
      <section id="tab-dashboard" class="content active">
        <div class="grid cols-2">
          <div class="card">
            <h3>‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
            <div class="stat"><div class="big" id="statOrders">12</div><span class="pill">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span></div>
          </div>
          <div class="card">
            <h3>COD ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</h3>
            <div class="stat"><div class="big" id="statCOD">‡∏ø8,500</div><span class="pill">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ñ‡∏≠‡∏ô</span></div>
          </div>
        </div>
        <div class="grid" style="margin-top:12px">
          <div class="card">
            <h3>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πà‡∏ß‡∏ô</h3>
            <div class="actions">
              <button class="btn primary" onclick="goto('create')">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
              <button class="btn ghost" onclick="goto('tracking')">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏û‡∏±‡∏™‡∏î‡∏∏</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Create Order -->
      <section id="tab-create" class="content">
        <div class="card" style="margin-bottom:12px"><h3>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3><p class="hint">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</p></div>
        <form id="orderForm" novalidate>
          <div>
            <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö *</label>
            <input type="text" name="receiver" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏∏‡∏ä‡∏≤‡∏ï‡∏¥ ‡πÉ‡∏à‡∏î‡∏µ" />
            <div class="error" data-err="receiver"></div>
          </div>
          <div>
            <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö *</label>
            <input type="tel" name="phone" required pattern="^0\\d{8,9}$" placeholder="0XXXXXXXXX" />
            <div class="hint">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢ 0 ‡∏°‡∏µ 9‚Äì10 ‡∏´‡∏•‡∏±‡∏Å</div>
            <div class="error" data-err="phone"></div>
          </div>
          <div>
            <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà *</label>
            <textarea name="address" required placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ‡∏ñ‡∏ô‡∏ô ‡∏ï‡∏≥‡∏ö‡∏• ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå"></textarea>
            <div class="error" data-err="address"></div>
          </div>
          <div class="row">
            <div>
              <label>‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
              <input type="text" name="gps" placeholder="13.7563, 100.5018" />
            </div>
            <div>
              <label>‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö</label>
              <select name="schedule">
                <option value="now">‡∏î‡πà‡∏ß‡∏ô (‡∏£‡∏±‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)</option>
                <option value="today">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</option>
                <option value="tomorrow">‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ</option>
                <option value="custom">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤</option>
              </select>
            </div>
          </div>
          <div class="row" id="scheduleRow" style="display:none">
            <div>
              <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
              <input type="date" name="date" />
            </div>
            <div>
              <label>‡πÄ‡∏ß‡∏•‡∏≤</label>
              <input type="time" name="time" />
            </div>
          </div>
          <div class="row">
            <div>
              <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)</label>
              <input type="number" step="0.01" min="0" name="weight" placeholder="‡πÄ‡∏ä‡πà‡∏ô 1.2" />
            </div>
            <div>
              <label>‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á</label>
              <select name="size">
                <option value="s">S</option>
                <option value="m">M</option>
                <option value="l">L</option>
                <option value="xl">XL</option>
              </select>
            </div>
          </div>
          <div>
            <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏±‡∏™‡∏î‡∏∏</label>
            <textarea name="desc" placeholder="‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤ 2 ‡∏ä‡∏¥‡πâ‡∏ô / ‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏Å‡∏´‡∏±‡∏Å"></textarea>
          </div>
          <div class="row">
            <div>
              <label>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
              <select name="payment">
                <option value="prepaid">‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á</option>
                <option value="cod">‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (COD)</option>
              </select>
            </div>
            <div>
              <label>‡∏¢‡∏≠‡∏î COD (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
              <input type="number" min="0" step="1" name="cod" placeholder="‡πÄ‡∏ä‡πà‡∏ô 850" />
            </div>
          </div>
          <div class="actions">
            <button type="button" class="btn ghost" onclick="resetForm()">‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°</button>
            <button type="submit" class="btn primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
          </div>
          <div class="hint">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Tracking ‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
        </form>
      </section>

      <!-- Tracking -->
      <section id="tab-tracking" class="content">
        <div class="card" style="margin-bottom:12px">
          <h3>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏û‡∏±‡∏™‡∏î‡∏∏</h3>
          <input id="trkSearch" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç Tracking ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö" oninput="filterTracking()" />
        </div>
        <table id="trkTable">
          <thead><tr><th>‡πÄ‡∏•‡∏Ç</th><th>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>

      <!-- COD -->
      <section id="tab-cod" class="content">
        <div class="grid">
          <div class="card">
            <h3>‡∏¢‡∏≠‡∏î COD</h3>
            <div class="stat">
              <div class="big" id="codBalance">‡∏ø8,500</div>
              <span class="pill">‡∏¢‡∏≠‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ñ‡∏≠‡∏ô</span>
            </div>
            <div class="actions" style="margin-top:10px">
              <button class="btn primary" onclick="requestWithdraw()">‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</button>
              <button class="btn ghost" onclick="toast('‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)')">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
            </div>
          </div>
          <div class="card">
            <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏ô</h3>
            <div id="wdHistory" class="hint">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
          </div>
        </div>
      </section>

      <!-- History -->
      <section id="tab-history" class="content">
        <div class="card" style="margin-bottom:12px"><h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3></div>
        <table id="histTable">
          <thead><tr><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>‡πÄ‡∏•‡∏Ç</th><th>‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>

      <button class="fab" onclick="goto('create')">‚ûï ‡∏™‡∏£‡πâ‡∏≤‡∏á</button>

      <nav class="bnv" role="tablist" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
        <div class="tab active" data-tab="dashboard" onclick="switchTab(this)">üè†<span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span></div>
        <div class="tab" data-tab="create" onclick="switchTab(this)">üìù<span>‡∏™‡∏£‡πâ‡∏≤‡∏á</span></div>
        <div class="tab" data-tab="tracking" onclick="switchTab(this)">üîé<span>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</span></div>
        <div class="tab" data-tab="cod" onclick="switchTab(this)">üíº<span>COD</span></div>
        <div class="tab" data-tab="history" onclick="switchTab(this)">üïò<span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</span></div>
      </nav>

      <!-- Fullscreen Modal: Scanner/Camera (placeholder) -->
      <div id="scanModal" class="modal" aria-hidden="true">
        <div class="sheet">
          <header>
            <div class="brand" style="padding:0 14px;gap:8px">
              <div class="logo"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M13 2 3 14h7l-1 8 10-12h-7l1-8z"/></svg></div>
              <h2>‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î / ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</h2>
            </div>
          </header>
          <div class="body">
            <div class="card" style="text-align:center">
              <p class="hint">‡∏™‡∏≤‡∏ò‡∏¥‡∏ï: ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ</p>
              <div style="aspect-ratio:16/9;border:2px dashed var(--line);border-radius:14px;display:grid;place-items:center;margin-top:12px">üî≤ ‡∏Å‡∏•‡πâ‡∏≠‡∏á</div>
              <div class="actions" style="justify-content:center;margin-top:12px">
                <button class="btn ghost" onclick="closeScan()">‡∏õ‡∏¥‡∏î</button>
                <button class="btn primary" onclick="toast('‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)')">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Simple SPA tab switch
    function switchTab(el){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'))
      el.classList.add('active')
      const tab = el.dataset.tab
      document.querySelectorAll('.content').forEach(s=>s.classList.remove('active'))
      document.getElementById('tab-'+tab).classList.add('active')
      // Scroll to top of content on switch
      document.getElementById('tab-'+tab).scrollTop = 0
    }
    function goto(tab){
      const el = document.querySelector(`.tab[data-tab="${tab}"]`)
      if(el) switchTab(el)
    }

    // Toast (very simple)
    function toast(msg){
      const t = document.createElement('div')
      t.textContent = msg
      t.style.cssText = 'position:fixed;left:50%;bottom:92px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:.95;z-index:99'
      document.body.appendChild(t)
      setTimeout(()=>t.remove(), 1800)
    }

    // Create Order form logic
    const form = document.getElementById('orderForm')
    const scheduleSel = form.elements['schedule']
    scheduleSel.addEventListener('change', e=>{
      document.getElementById('scheduleRow').style.display = (e.target.value==='custom')?'grid':'none'
    })

    function setError(name, msg){
      const el = document.querySelector(`[data-err="${name}"]`)
      if(el) el.textContent = msg||''
    }
    function resetForm(){ form.reset(); document.getElementById('scheduleRow').style.display='none'; ['receiver','phone','address'].forEach(n=>setError(n,'')) }

    form.addEventListener('submit', (e)=>{
      e.preventDefault()
      let ok = true
      const recv = form.elements['receiver']
      const phone = form.elements['phone']
      const addr = form.elements['address']
      if(!recv.value.trim()){ setError('receiver','‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö'); ok=false } else setError('receiver','')
      const phoneRe = /^0\d{8,9}$/
      if(!phoneRe.test(phone.value.trim())){ setError('phone','‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); ok=false } else setError('phone','')
      if(!addr.value.trim()){ setError('address','‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà'); ok=false } else setError('address','')
      if(!ok) return
      // Simulate order creation
      const trk = 'TJX' + Math.random().toString(36).slice(2,7).toUpperCase()
      addTracking({no:trk, name:recv.value.trim(), status:'COMMISSION CREATE', ts:new Date()})
      addHistory({date:new Date(), no:trk, dest:addr.value.split('\n')[0]||addr.value.slice(0,24), status:'CREATED'})
      toast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à | ‡πÄ‡∏•‡∏Ç '+trk)
      resetForm()
      goto('tracking')
    })

    // Tracking data demo
    const trkBody = document.querySelector('#trkTable tbody')
    const histBody = document.querySelector('#histTable tbody')
    const dataTrk = []
    function addTracking(row){
      dataTrk.unshift(row)
      renderTracking()
    }
    function renderTracking(){
      trkBody.innerHTML = dataTrk.map(r=>{
        const dt = new Date(r.ts)
        const ts = dt.toLocaleString('th-TH', {hour:'2-digit', minute:'2-digit', day:'2-digit', month:'short'})
        return `<tr><td>${r.no}</td><td>${r.name}</td><td>${r.status}</td><td>${ts}</td></tr>`
      }).join('') || `<tr><td colspan="4" class="hint" style="padding:14px;background:none;border:none">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</td></tr>`
    }
    function filterTracking(){
      const q = document.getElementById('trkSearch').value.toLowerCase()
      const rows = Array.from(trkBody.querySelectorAll('tr'))
      rows.forEach(tr=>{
        const text = tr.textContent.toLowerCase()
        tr.style.display = text.includes(q)?'':'none'
      })
    }

    // History demo
    function addHistory(row){
      const d = new Date(row.date)
      const dstr = d.toLocaleDateString('th-TH', {year:'numeric', month:'2-digit', day:'2-digit'})
      const tr = document.createElement('tr')
      tr.innerHTML = `<td>${dstr}</td><td>${row.no}</td><td>${row.dest}</td><td>${row.status}</td>`
      histBody.prepend(tr)
    }

    // COD withdraw demo
    function requestWithdraw(){
      const now = new Date().toLocaleString('th-TH')
      document.getElementById('wdHistory').innerHTML = `<ul><li>${now}: ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô ‡∏ø8,500 (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£)</li></ul>`
      toast('‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß')
    }

    // Scan modal
    function openScan(){ document.getElementById('scanModal').classList.add('open'); document.getElementById('scanModal').setAttribute('aria-hidden','false') }
    function closeScan(){ document.getElementById('scanModal').classList.remove('open'); document.getElementById('scanModal').setAttribute('aria-hidden','true') }

    // Seed sample rows
    ;(function seed(){
      ['TJX8AB12','TJX7CD34','TJX5EF56'].forEach((no,i)=>{
        addTracking({no, name:['‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏ó‡∏µ','‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£','‡∏Ñ‡∏∏‡∏ì‡∏î‡∏≤‡∏ß'][i], status:['HUB IN','OUT FOR DELIVERY','DELIVERED'][i], ts:new Date(Date.now()- (i+1)*3600e3)})
        addHistory({date:new Date(Date.now()-(i+2)*86400e3), no, dest:['‡∏ö‡∏≤‡∏á‡πÅ‡∏Ñ','‡∏û‡∏£‡∏∞‡πÇ‡∏Ç‡∏ô‡∏á','‡∏£‡∏±‡∏ï‡∏ô‡∏≤‡∏ò‡∏¥‡πÄ‡∏ö‡∏®‡∏£‡πå'][i], status:['HUB IN','OFD','DELIVERED'][i]})
      })
    })()
  </script>
</body>
</html>
